/* Reset */
* { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
html,body { height:100%; width:100%; font-family:'Orbitron', Arial, sans-serif; background:#111; color:#fff; overflow-x:hidden; -webkit-font-smoothing:antialiased; -webkit-text-size-adjust:100%; }

/* Themes */
body.theme-neon { --accent1: #ff3333; --accent2:#ff66cc; --accent3:#9933ff; background:#0b0b0b; }
body.theme-space { --accent1:#2ea3ff; --accent2:#66d0ff; --accent3:#9ad7ff; background:linear-gradient(180deg,#030417 0%,#071026 100%); }
body.theme-matrix { --accent1:#00ff66; --accent2:#22ff88; --accent3:#66ff99; background:#020200; color:#c5ffd0; }

#offline-banner { position:fixed; left:12px; right:12px; top:12px; background:#222; color:#fff; padding:8px 12px; border-radius:8px; display:none; z-index:99999; box-shadow:0 6px 18px rgba(0,0,0,0.6); }

/* Particles */
#particles-js { position:fixed; inset:0; z-index:0; }

/* HUD */
#level-hud { position:fixed; top:env(safe-area-inset-top,14px); left:env(safe-area-inset-left,14px); background:rgba(0,0,0,0.6); padding:10px 12px; border-radius:10px; font-family:monospace,Arial; color:#fff; z-index:99998; width:210px; box-shadow:0 6px 20px rgba(0,0,0,0.6); backdrop-filter: blur(6px); }
#level-label{font-weight:700;margin-bottom:6px;font-size:13px;letter-spacing:1px;}
#xp-bar{background:rgba(255,255,255,0.08);border-radius:8px;height:12px;width:100%;overflow:hidden;margin-bottom:6px;}
#xp-fill{background:linear-gradient(90deg,var(--accent1),var(--accent2));height:100%;width:0%;transition:width .35s ease;}
#xp-text{font-size:12px;opacity:.95;}

/* Start overlay */
#start-overlay{position:fixed;inset:0;background:rgba(11,11,11,0.96);display:flex;align-items:center;justify-content:center;z-index:1000;transition:opacity .28s ease;}
#start-overlay.hidden{opacity:0;pointer-events:none;}
#start-btn{padding:20px 48px;font-size:28px;font-weight:700;background:linear-gradient(145deg,var(--accent1),#ff0000);color:#fff;border:none;border-radius:12px;cursor:pointer;box-shadow:0 0 40px var(--accent1);transition:transform .25s ease;outline:none;}
#start-btn:hover{transform:scale(1.04);}

/* Layout */
.container{position:relative;z-index:5;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center;}
.logo img{width:160px;max-width:30vmax;display:block;margin:0 auto;animation:logoSpin 10s linear infinite;}
@keyframes logoSpin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
h1{margin-top:20px;font-size:36px;color:var(--accent1);text-shadow:0 0 14px rgba(255,51,51,0.25);letter-spacing:2px;}
.subtitle{margin-top:8px;color:#d0d0d0;font-size:14px;}

/* top controls */
.top-controls{position:fixed;top:18px;left:50%;transform:translateX(-50%);display:flex;gap:12px;align-items:center;z-index:99999}
.search-wrap input{padding:8px 12px;border-radius:10px;border:none;min-width:240px;background:rgba(255,255,255,0.04);color:#fff;outline:none}
.toggles{display:flex;gap:12px;align-items:center}
.toggles select{padding:6px 8px;border-radius:8px;background:rgba(255,255,255,0.04);border:none;color:#fff;outline:none}

/* theme switch */
.switch{display:flex;align-items:center;gap:8px;color:#ddd}
.switch input{display:none}
.switch .slider{width:46px;height:24px;background:rgba(255,255,255,0.06);border-radius:20px;position:relative;cursor:pointer}
.switch .slider::after{content:'';position:absolute;left:4px;top:4px;width:16px;height:16px;border-radius:50%;background:#fff;transition:transform .2s ease}
.switch input:checked + .slider{background:linear-gradient(90deg,var(--accent1),var(--accent2))}
.switch input:checked + .slider::after{transform:translateX(22px)}
.switch small{font-size:12px;opacity:.9}

/* Volume */
.volume-control input[type=range]{width:120px}

/* Buttons area */
.controls-row{display:flex;gap:18px;align-items:flex-start;flex-wrap:wrap;justify-content:center;margin-top:18px}
.buttons{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;max-width:900px;padding:6px}
.btn{min-width:220px;padding:12px 18px;font-size:16px;font-family:'Orbitron',sans-serif;border-radius:12px;border:none;background:linear-gradient(145deg,#222,#111);color:#fff;cursor:pointer;position:relative;overflow:hidden;box-shadow:0 6px 12px rgba(0,0,0,0.6);transition:transform .14s ease,box-shadow .25s ease,opacity .3s;transform:translateY(0) scale(1);outline:none}
.btn:active{transform:scale(.98)}
.btn[data-glow]{box-shadow: 0 6px 20px rgba(0,0,0,0.6), 0 0 30px rgba(255,0,0,0.0)}
.btn--hidden{opacity:.25;pointer-events:none}

/* Achievements preview */
.achievements-preview{background:rgba(0,0,0,0.45);padding:8px;border-radius:10px;color:#fff;min-width:150px}
.achievements-preview ul{list-style:none;margin-top:6px;max-height:84px;overflow:auto;padding-right:6px}

/* Music selector grid */
.music-selector{margin-top:20px;text-align:center;color:#fff;display:flex;flex-direction:column;gap:10px;align-items:center}
.music-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:8px;width:100%;max-width:1000px}
.music-grid button{padding:8px;border:none;border-radius:10px;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#111;font-weight:700;cursor:pointer;outline:none}

/* Music visualizer canvas */
#music-visualizer{width:100%;height:120px;position:fixed;bottom:0;left:0;z-index:4;pointer-events:none;border:none;outline:none;background:transparent;}

/* Achievement toast */
#achievement-toast{position:fixed;right:16px;bottom:120px;z-index:999999;display:flex;flex-direction:column;gap:8px}
.toast{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#111;padding:10px 14px;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,0.6);font-weight:700}

/* AI assistant */
#ai-assistant{position:fixed;right:18px;bottom:18px;z-index:999999;display:flex;flex-direction:column;align-items:flex-end;gap:8px}
#ai-avatar{background:linear-gradient(90deg,var(--accent2),var(--accent3));width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px;cursor:pointer;box-shadow:0 8px 30px rgba(0,0,0,0.5)}
#ai-bubble{max-width:260px;background:rgba(0,0,0,0.8);color:#fff;padding:10px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
#ai-bubble.hidden{display:none}
.ai-actions{display:flex;gap:8px;margin-top:8px}
.ai-actions button{padding:6px 8px;border-radius:8px;border:none;cursor:pointer;background:var(--accent1);color:#111;font-weight:700}

/* Version text */
.version-text{position:fixed;right:12px;bottom:12px;font-size:13px;color:#aaa;z-index:6;pointer-events:none}

/* Responsive */
@media(max-width:900px){.top-controls{position:static;transform:none;margin-bottom:12px;}.controls-row{flex-direction:column-reverse;align-items:center}}
@media(max-width:420px){#level-hud{left:8px;top:8px;width:170px;padding:8px}#start-btn{padding:14px 28px;font-size:20px}.btn{min-width:160px;font-size:14px}}
